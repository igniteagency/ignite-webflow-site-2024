"use strict";(()=>{var v="data-duration",A="data-stagger",S="data-trigger-start",d="data-prev-section-trigger",g={LETTER_STAGGER:"gsap-letter-stagger",LINE_STAGGER:"gsap-line-stagger",SCRUB_TEXT:"data-scrub",HOVER_STAGGER_TRIGGER:"gsap-hover-stagger-trigger",HOVER_STAGGER:"gsap-hover-stagger"},u=class u{constructor(){this.splitInstances=[];this.animations=[];this.elements=[];this.isRefreshing=!1;this._resizeTimeout=null;this.abortController=new AbortController,new ResizeObserver(this.handleResize.bind(this)).observe(document.body)}static getInstance(){return u.instance||(u.instance=new u),u.instance}init(){this.abortController.signal.aborted&&(this.abortController=new AbortController),this.setupAnimations()}destroy(){this.abortController.abort(),this.clearAnimations()}handleResize(){this.isRefreshing||(this._resizeTimeout&&(window.clearTimeout(this._resizeTimeout),this._resizeTimeout=null),this._resizeTimeout=window.setTimeout(()=>{if(!this.isRefreshing)try{this.isRefreshing=!0,this.refresh()}finally{this.isRefreshing=!1,this._resizeTimeout=null}},500))}refresh(){this.destroy(),this.init()}clearAnimations(){this.animations.forEach(e=>{e.kill()}),this.elements.forEach(e=>{var t;(t=e.animation)==null||t.kill()}),this.splitInstances.forEach(e=>{e.revert()}),this.animations=[],this.elements=[],this.splitInstances=[]}setupAnimations(){this.setupLetterStagger(),this.setupLineStagger(),this.setupScrubText(),this.setupHoverStagger()}getPreviousSection(e){let t=e.closest("section");return t?t.previousElementSibling:null}setupLetterStagger(){document.querySelectorAll(`[${g.LETTER_STAGGER}]`).forEach(e=>{let t=e,s=new window.SplitType(t,{types:"words,lines,chars",tagName:"span"});this.splitInstances.push(s);let n=this.getStaggerAttrValue(t,.03),l=this.getTriggerAttrValue(t,"center"),a=t.hasAttribute(d),i=a?this.getPreviousSection(t):null;window.gsap.set(s.chars,{y:"100%"});let r=window.gsap.to(s.chars,{y:"0%",duration:this.getDurationAttrValue(t,1),ease:"expo.inOut",stagger:n,scrollTrigger:{trigger:i||t,start:a&&i?"bottom bottom":`top ${l}`,invalidateOnRefresh:!0}});this.animations.push(r)})}setupLineStagger(){document.querySelectorAll(`[${g.LINE_STAGGER}]`).forEach(e=>{var r;let t=e,s=new window.SplitType(t,{types:"lines",tagName:"span"});this.splitInstances.push(s);let n=this.getDurationAttrValue(t,.3),l=this.getTriggerAttrValue(t,"80%"),a=t.hasAttribute(d),i=a?this.getPreviousSection(t):null;(r=s.lines)==null||r.forEach(o=>{window.gsap.set(o,{y:"100%",opacity:0});let c=window.gsap.to(o,{y:"0%",opacity:1,duration:n,ease:"expo.out",scrollTrigger:{trigger:i||o,start:a&&i?"bottom bottom":`top ${l}`,toggleActions:"play none none none"}});this.animations.push(c)})})}setupScrubText(){document.querySelectorAll(`[${g.SCRUB_TEXT}]`).forEach(e=>{let t=e,s=new window.SplitType(t,{types:["chars","words"],tagName:"span"});this.splitInstances.push(s),window.gsap.set(s.chars,{opacity:.2});let n=window.gsap.to(s.chars,{scrollTrigger:{trigger:t,start:"top 60%",end:"bottom 30%",scrub:!0,markers:!1,invalidateOnRefresh:!0},opacity:1,stagger:.1,duration:1});this.animations.push(n)})}setupHoverStagger(){document.querySelectorAll(`[${g.HOVER_STAGGER}], [${g.HOVER_STAGGER_TRIGGER}]`).forEach(e=>{let t=e,s={element:t};if(t.hasAttribute(g.HOVER_STAGGER_TRIGGER)){let n=t.querySelectorAll(`[${g.HOVER_STAGGER}]`);if(n.length===0)return;let l=Array.from(n).map(r=>{let o=r,c=new window.SplitType(o,{types:"words,chars",tagName:"span"});this.splitInstances.push(c);let T=this.getDurationAttrValue(o,.8),E=this.getStaggerAttrValue(o,.01),m=window.gsap.timeline({paused:!0});return m.to(c.chars,{yPercent:-100,duration:T,ease:"expo.inOut",stagger:E}),m}),a=()=>l.forEach(r=>r.play()),i=()=>l.forEach(r=>r.reverse());t.addEventListener("mouseenter",a,{signal:this.abortController.signal}),t.addEventListener("focusin",a,{signal:this.abortController.signal}),t.addEventListener("mouseleave",i,{signal:this.abortController.signal}),t.addEventListener("focusout",i,{signal:this.abortController.signal}),l.forEach(r=>{this.animations.push(r)})}else if(t.hasAttribute(g.HOVER_STAGGER)&&!t.closest(`[${g.HOVER_STAGGER_TRIGGER}]`)){let n=new window.SplitType(t,{types:"words,chars",tagName:"span"});this.splitInstances.push(n);let l=this.getDurationAttrValue(t,.8),a=this.getStaggerAttrValue(t,.01),i=window.gsap.timeline({paused:!0});i.to(n.chars,{yPercent:-100,duration:l,ease:"expo.inOut",stagger:a}),s.animation=i,this.elements.push(s);let r=()=>i.play(),o=()=>i.reverse();t.addEventListener("mouseenter",r,{signal:this.abortController.signal}),t.addEventListener("focusin",r,{signal:this.abortController.signal}),t.addEventListener("mouseleave",o,{signal:this.abortController.signal}),t.addEventListener("focusout",o,{signal:this.abortController.signal})}})}getDurationAttrValue(e,t){return parseFloat(e.getAttribute(v)||t.toString())}getStaggerAttrValue(e,t){return parseFloat(e.getAttribute(A)||t.toString())}getTriggerAttrValue(e,t){return e.getAttribute(S)||t}};u.instance=null;var p=u;function R(){let h=p.getInstance();return h.init(),h}})();
