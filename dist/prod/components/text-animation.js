"use strict";(()=>{var T="data-duration",v="data-stagger",A="data-trigger-start",m="data-prev-section-trigger",l={LETTER_STAGGER:"gsap-letter-stagger",LINE_STAGGER:"gsap-line-stagger",SCRUB_TEXT:"data-scrub",HOVER_STAGGER_TRIGGER:"gsap-hover-stagger-trigger",HOVER_STAGGER:"gsap-hover-stagger"},c=class c{constructor(){this.splitInstances=[];this.animations=[];this.elements=[];this.isRefreshing=!1;this._resizeTimeout=null;this.abortController=new AbortController}static getInstance(){return c.instance||(c.instance=new c),c.instance}init(){this.abortController.signal.aborted&&(this.abortController=new AbortController),this.setupAnimations()}destroy(){this.abortController.abort(),this.clearAnimations()}refresh(){this.destroy(),this.init()}clearAnimations(){this.animations.forEach(e=>{e.kill()}),this.elements.forEach(e=>{var t;(t=e.animation)==null||t.kill()}),this.splitInstances.forEach(e=>{e.revert()}),this.animations=[],this.elements=[],this.splitInstances=[]}setupAnimations(){console.debug("Setting up text split data attribute animations"),this.setupLetterStagger(),this.setupLineStagger(),this.setupScrubText(),this.setupHoverStagger()}getPreviousSection(e){let t=e.closest("section");return t?t.previousElementSibling:null}setupLetterStagger(){document.querySelectorAll(`[${l.LETTER_STAGGER}]`).forEach(e=>{let t=e,n=new SplitText(t,{type:"words,lines,chars",tag:"span"});this.splitInstances.push(n);let o=this.getStaggerAttrValue(t,.03),i=this.getTriggerAttrValue(t,"center"),a=t.hasAttribute(m),s=a?this.getPreviousSection(t):null;gsap.set(n.chars,{y:"100%"});let r=gsap.to(n.chars,{y:"0%",duration:this.getDurationAttrValue(t,1),ease:"expo.inOut",stagger:o,scrollTrigger:{trigger:s||t,start:a&&s?"bottom bottom":`top ${i}`,invalidateOnRefresh:!0}});this.animations.push(r)})}setupLineStagger(){document.querySelectorAll(`[${l.LINE_STAGGER}]`).forEach(e=>{var s;let t=new SplitText(e,{type:"lines",tag:"span"});this.splitInstances.push(t);let n=this.getDurationAttrValue(e,.3),o=this.getTriggerAttrValue(e,"80%"),i=e.hasAttribute(m),a=i?this.getPreviousSection(e):null;(s=t.lines)==null||s.forEach(r=>{gsap.set(r,{y:"100%",opacity:0});let g=gsap.to(r,{y:"0%",opacity:1,duration:n,ease:"expo.out",scrollTrigger:{trigger:a||r,start:i&&a?"bottom bottom":`top ${o}`,toggleActions:"play none none none"}});this.animations.push(g)})})}setupScrubText(){document.querySelectorAll(`[${l.SCRUB_TEXT}]`).forEach(e=>{let t=new SplitText(e,{type:"chars,words",tag:"span"});this.splitInstances.push(t),gsap.set(t.chars,{opacity:.2});let n=gsap.to(t.chars,{scrollTrigger:{trigger:e,start:"top 60%",end:"bottom 30%",scrub:!0,markers:!1,invalidateOnRefresh:!0},opacity:1,stagger:.1,duration:1});this.animations.push(n)})}setupHoverStagger(){if(!window.matchMedia("(min-width: 1100px) and (pointer: fine)").matches){window.IS_DEBUG_MODE&&console.debug("Hover stagger not set up on screens smaller than 1100px or devices with a coarse pointer");return}document.querySelectorAll(`[${l.HOVER_STAGGER}], [${l.HOVER_STAGGER_TRIGGER}]`).forEach(t=>{let n={element:t};if(t.hasAttribute(l.HOVER_STAGGER_TRIGGER)){let o=t.querySelectorAll(`[${l.HOVER_STAGGER}]`);if(o.length===0)return;let i=Array.from(o).map(r=>{let g=new SplitText(r,{type:"words,chars",tag:"span"});this.splitInstances.push(g);let E=this.getDurationAttrValue(r,.8),d=this.getStaggerAttrValue(r,.01),h=gsap.timeline({paused:!0});return h.to(g.chars,{yPercent:-100,duration:E,ease:"expo.inOut",stagger:d}),h}),a=()=>i.forEach(r=>r.play()),s=()=>i.forEach(r=>r.reverse());t.addEventListener("mouseenter",a,{signal:this.abortController.signal}),t.addEventListener("focusin",a,{signal:this.abortController.signal}),t.addEventListener("mouseleave",s,{signal:this.abortController.signal}),t.addEventListener("focusout",s,{signal:this.abortController.signal}),i.forEach(r=>{this.animations.push(r)})}else if(t.hasAttribute(l.HOVER_STAGGER)&&!t.closest(`[${l.HOVER_STAGGER_TRIGGER}]`)){let o=new SplitText(t,{type:"words,chars",tag:"span"});this.splitInstances.push(o);let i=this.getDurationAttrValue(t,.8),a=this.getStaggerAttrValue(t,.01),s=gsap.timeline({paused:!0});s.to(o.chars,{yPercent:-100,duration:i,ease:"expo.inOut",stagger:a}),n.animation=s,this.elements.push(n);let r=()=>s.play(),g=()=>s.reverse();t.addEventListener("mouseenter",r,{signal:this.abortController.signal}),t.addEventListener("focusin",r,{signal:this.abortController.signal}),t.addEventListener("mouseleave",g,{signal:this.abortController.signal}),t.addEventListener("focusout",g,{signal:this.abortController.signal})}})}getDurationAttrValue(e,t){return parseFloat(e.getAttribute(T)||t.toString())}getStaggerAttrValue(e,t){return parseFloat(e.getAttribute(v)||t.toString())}getTriggerAttrValue(e,t){return e.getAttribute(A)||t}};c.instance=null;var u=c;function S(){let p=u.getInstance();return p.init(),p}})();
