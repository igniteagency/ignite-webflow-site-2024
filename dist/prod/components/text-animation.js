"use strict";(()=>{var A="data-duration",S="data-stagger",R="data-trigger-start",E="data-prev-section-trigger",l={LETTER_STAGGER:"gsap-letter-stagger",LINE_STAGGER:"gsap-line-stagger",SCRUB_TEXT:"data-scrub",HOVER_STAGGER_TRIGGER:"gsap-hover-stagger-trigger",HOVER_STAGGER:"gsap-hover-stagger"},u=class u{constructor(){this.splitInstances=[];this.animations=[];this.elements=[];this.isRefreshing=!1;this._resizeTimeout=null;this.abortController=new AbortController,new ResizeObserver(this.handleResize.bind(this)).observe(document.body)}static getInstance(){return u.instance||(u.instance=new u),u.instance}init(){this.abortController.signal.aborted&&(this.abortController=new AbortController),this.setupAnimations()}destroy(){this.abortController.abort(),this.clearAnimations()}handleResize(){this.isRefreshing||(this._resizeTimeout&&(window.clearTimeout(this._resizeTimeout),this._resizeTimeout=null),this._resizeTimeout=window.setTimeout(()=>{if(!this.isRefreshing)try{this.isRefreshing=!0,this.refresh()}finally{this.isRefreshing=!1,this._resizeTimeout=null}},500))}refresh(){this.destroy(),this.init()}clearAnimations(){this.animations.forEach(s=>{s.kill()}),this.elements.forEach(s=>{var t;(t=s.animation)==null||t.kill()}),this.splitInstances.forEach(s=>{s.revert()}),this.animations=[],this.elements=[],this.splitInstances=[]}setupAnimations(){this.setupLetterStagger(),this.setupLineStagger(),this.setupScrubText(),this.setupHoverStagger()}getPreviousSection(s){let t=s.closest("section");return t?t.previousElementSibling:null}setupLetterStagger(){document.querySelectorAll(`[${l.LETTER_STAGGER}]`).forEach(s=>{let t=s,e=new window.SplitType(t,{types:"words,lines,chars",tagName:"span"});this.splitInstances.push(e);let g=this.getStaggerAttrValue(t,.03),o=this.getTriggerAttrValue(t,"center"),n=t.hasAttribute(E),a=n?this.getPreviousSection(t):null;window.gsap.set(e.chars,{y:"100%"});let i=window.gsap.to(e.chars,{y:"0%",duration:this.getDurationAttrValue(t,1),ease:"expo.inOut",stagger:g,scrollTrigger:{trigger:a||t,start:n&&a?"bottom bottom":`top ${o}`,invalidateOnRefresh:!0}});this.animations.push(i)})}setupLineStagger(){document.querySelectorAll(`[${l.LINE_STAGGER}]`).forEach(s=>{var i;let t=s,e=new window.SplitType(t,{types:"lines",tagName:"span"});this.splitInstances.push(e);let g=this.getDurationAttrValue(t,.3),o=this.getTriggerAttrValue(t,"80%"),n=t.hasAttribute(E),a=n?this.getPreviousSection(t):null;(i=e.lines)==null||i.forEach(r=>{window.gsap.set(r,{y:"100%",opacity:0});let c=window.gsap.to(r,{y:"0%",opacity:1,duration:g,ease:"expo.out",scrollTrigger:{trigger:a||r,start:n&&a?"bottom bottom":`top ${o}`,toggleActions:"play none none none"}});this.animations.push(c)})})}setupScrubText(){document.querySelectorAll(`[${l.SCRUB_TEXT}]`).forEach(s=>{let t=s,e=new window.SplitType(t,{types:["chars","words"],tagName:"span"});this.splitInstances.push(e),window.gsap.set(e.chars,{opacity:.2});let g=window.gsap.to(e.chars,{scrollTrigger:{trigger:t,start:"top 60%",end:"bottom 30%",scrub:!0,markers:!1,invalidateOnRefresh:!0},opacity:1,stagger:.1,duration:1});this.animations.push(g)})}setupHoverStagger(){if(!window.matchMedia("(min-width: 1100px) and (pointer: fine)").matches){window.IS_DEBUG_MODE&&console.debug("Hover stagger not set up on screens smaller than 1100px or devices with a coarse pointer");return}document.querySelectorAll(`[${l.HOVER_STAGGER}], [${l.HOVER_STAGGER_TRIGGER}]`).forEach(t=>{let e=t,g={element:e};if(e.hasAttribute(l.HOVER_STAGGER_TRIGGER)){let o=e.querySelectorAll(`[${l.HOVER_STAGGER}]`);if(o.length===0)return;let n=Array.from(o).map(r=>{let c=r,m=new window.SplitType(c,{types:"words,chars",tagName:"span"});this.splitInstances.push(m);let T=this.getDurationAttrValue(c,.8),v=this.getStaggerAttrValue(c,.01),d=window.gsap.timeline({paused:!0});return d.to(m.chars,{yPercent:-100,duration:T,ease:"expo.inOut",stagger:v}),d}),a=()=>n.forEach(r=>r.play()),i=()=>n.forEach(r=>r.reverse());e.addEventListener("mouseenter",a,{signal:this.abortController.signal}),e.addEventListener("focusin",a,{signal:this.abortController.signal}),e.addEventListener("mouseleave",i,{signal:this.abortController.signal}),e.addEventListener("focusout",i,{signal:this.abortController.signal}),n.forEach(r=>{this.animations.push(r)})}else if(e.hasAttribute(l.HOVER_STAGGER)&&!e.closest(`[${l.HOVER_STAGGER_TRIGGER}]`)){let o=new window.SplitType(e,{types:"words,chars",tagName:"span"});this.splitInstances.push(o);let n=this.getDurationAttrValue(e,.8),a=this.getStaggerAttrValue(e,.01),i=window.gsap.timeline({paused:!0});i.to(o.chars,{yPercent:-100,duration:n,ease:"expo.inOut",stagger:a}),g.animation=i,this.elements.push(g);let r=()=>i.play(),c=()=>i.reverse();e.addEventListener("mouseenter",r,{signal:this.abortController.signal}),e.addEventListener("focusin",r,{signal:this.abortController.signal}),e.addEventListener("mouseleave",c,{signal:this.abortController.signal}),e.addEventListener("focusout",c,{signal:this.abortController.signal})}})}getDurationAttrValue(s,t){return parseFloat(s.getAttribute(A)||t.toString())}getStaggerAttrValue(s,t){return parseFloat(s.getAttribute(S)||t.toString())}getTriggerAttrValue(s,t){return s.getAttribute(R)||t}};u.instance=null;var p=u;function b(){let h=p.getInstance();return h.init(),h}})();
