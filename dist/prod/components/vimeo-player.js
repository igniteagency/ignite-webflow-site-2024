"use strict";(()=>{function w(r){let l=r.querySelector("[data-vimeo-player]"),e=new window.Vimeo.Player(l),d=r.querySelector("[data-vimeo-play-pause-button]"),i=r.querySelector("[data-vimeo-play-icon]"),a=r.querySelector("[data-vimeo-pause-icon]"),g=r.querySelector("[data-vimeo-audio-button]"),p=r.querySelector("[data-vimeo-audio-on]"),f=r.querySelector("[data-vimeo-audio-off]"),u=parseFloat(r.getAttribute("data-vimeo-start")||"0")||0,y=parseFloat(r.getAttribute("data-vimeo-end")||"")||null,L=r.hasAttribute("data-vimeo-hover-play"),o=!1,m=!1,n=!1,c=!1;function v(t){let s=t.getBoundingClientRect();return s.top<=(window.innerHeight||document.documentElement.clientHeight)&&s.bottom>=0&&s.left<=(window.innerWidth||document.documentElement.clientWidth)&&s.right>=0}function h(){let t=n;n=v(l),window.matchMedia("(prefers-reduced-motion: reduce)").matches||(!t&&n&&o&&!c?e.setCurrentTime(u).then(()=>e.play()):t&&!n&&o&&e.pause())}function E(){y!==null&&e.getCurrentTime().then(t=>{t>=y&&e.setCurrentTime(u)})}e.on("timeupdate",function(){E()}),e.on("play",function(){window.matchMedia("(prefers-reduced-motion: reduce)").matches&&!o&&!c?(console.log("Preventing autoplay due to reduced motion preference"),e.pause().then(()=>{a.classList.add("hide"),i.classList.remove("hide")}).catch(s=>console.error("Error preventing autoplay:",s))):(console.log("Allowing play - user initiated or intended"),o=!0,i.classList.add("hide"),a.classList.remove("hide"))}),e.ready().then(()=>e.setVolume(0)).then(()=>e.setCurrentTime(u)).then(()=>e.pause()).then(()=>{n=v(l);let t=window.matchMedia("(prefers-reduced-motion: reduce)").matches;if(console.log("User prefers reduced motion:",t),o=!1,a.classList.add("hide"),i.classList.remove("hide"),n&&!t)return e.play().then(()=>{o=!0,i.classList.add("hide"),a.classList.remove("hide"),console.log("Video autostarted because in view and reduced motion not preferred")}).catch(s=>{console.warn("Could not autoplay video:",s),o=!1});t&&console.log("Video kept paused due to reduced motion preference")}).then(()=>{console.log("Vimeo player initialized successfully, playing:",o)}).catch(t=>{console.error("Error initializing Vimeo player:",t),e.pause().catch(s=>console.error("Failed to pause on error:",s)),o=!1,a.classList.add("hide"),i.classList.remove("hide")}),d.addEventListener("click",function(){console.log("Play/pause button clicked, current state:",o,"on container:",r),e.getPaused().then(t=>{console.log("Actual player paused state:",t),o=!t,o?e.pause().then(()=>{console.log("Video paused successfully by user"),a.classList.add("hide"),i.classList.remove("hide"),o=!1,c=!0}).catch(s=>console.error("Error pausing:",s)):(c=!1,e.play().then(()=>{console.log("Video played successfully by user"),i.classList.add("hide"),a.classList.remove("hide"),o=!0}).catch(s=>{console.error("Error playing:",s),o=!1,c=!0}))}).catch(t=>{console.error("Error getting player state:",t),o=!o,c=!o,o?e.play().then(()=>{i.classList.add("hide"),a.classList.remove("hide"),console.log("Fallback: Video playing by user")}).catch(s=>console.error("Fallback play error:",s)):e.pause().then(()=>{a.classList.add("hide"),i.classList.remove("hide"),console.log("Fallback: Video paused by user")}).catch(s=>console.error("Fallback pause error:",s))})}),g.addEventListener("click",function(){m?e.setVolume(0).then(()=>{p.classList.add("hide"),f.classList.remove("hide"),m=!1}).catch(t=>console.error("Error muting:",t)):e.setVolume(1).then(()=>{f.classList.add("hide"),p.classList.remove("hide"),m=!0}).catch(t=>console.error("Error unmuting:",t))}),L&&(window.matchMedia("(prefers-reduced-motion: reduce)").matches?console.log("Hover play disabled due to reduced motion preference"):(r.addEventListener("mouseenter",function(){n&&!c&&e.play().then(()=>{i.classList.add("hide"),a.classList.remove("hide"),o=!0}).catch(s=>console.error("Error playing on hover:",s))}),r.addEventListener("mouseleave",function(){n&&!c&&e.pause().then(()=>{a.classList.add("hide"),i.classList.remove("hide"),o=!1}).catch(s=>console.error("Error pausing on hover out:",s))}))),e.on("play",function(){o=!0,i.classList.add("hide"),a.classList.remove("hide")}),e.on("pause",function(){n&&(o=!1,a.classList.add("hide"),i.classList.remove("hide"))}),window.addEventListener("scroll",h,{passive:!0}),window.addEventListener("resize",h,{passive:!0}),setTimeout(h,1e3)}function b(){document.querySelectorAll('iframe[src*="vimeo"]').forEach(l=>{let e=l.getAttribute("src");e&&e.includes("autoplay=1")&&console.warn("Found iframe with autoplay=1 which may override preferences:",l)})}function V(){b();let r=document.querySelectorAll("[data-vimeo-container]");console.log("Found",r.length,"Vimeo containers"),r.forEach((l,e)=>{console.log("Initializing player",e+1);try{w(l)}catch(d){console.error("Error initializing player",e+1,d)}}),console.log("All players initialization attempted")}})();
